
@{
    ViewBag.Title = "Thống kê tình hình học tập";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@if (Session["StudentId"] == null)
{
    <!-- Show have no data start -->
    <section>
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title-wrap bar-pink">
                            <h4 class="card-title mb-0">Thống kê tình hình học tập</h4>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="card-block">
                            <div class="container" id="viewStudyResult_instruction">
                                <h4 class="card-title text-center mt-4">Xin lỗi, hệ thống chưa có dữ liệu về bạn</h4>
                                <img class="mx-auto d-block w-50" alt="Instruction" src="~/assets/images/img_sorry.svg" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Show have no data end -->
}
else
{
    <!-- Section start -->
    <section>
        <div class="row">
            <div class="col-sm-12">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title-wrap bar-pink">
                            <h4 class="card-title">Bar Chart</h4>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="card-block chartjs">
                            <canvas id="column-chart" height="400"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Section end -->

    @section scripts {
        <script src="~/app-assets/vendors/js/chart.min.js"></script>
        <script src="~/app-assets/vendors/js/chartjs-plugin-datalabels.min.js"></script>

        <script type="text/javascript">

            $.ajax({
                type: 'POST',
                url: '@Url.Action("GetStatistics", "Statistics")',
                success: function (response) {
                    if (response) {
                        console.log(response);
                    }
                    else {
                    }
                }
            });

            //Get the context of the Chart canvas element we want to select
            var ctx = $("#column-chart");

            // Chart Options
            var chartOptions = {
                // Elements options apply to all of the options unless overridden in a dataset
                // In this case, we are setting the border of each bar to be 2px wide and green
                elements: {
                    rectangle: {
                        borderWidth: 2,
                        borderColor: 'rgb(0, 255, 0)',
                        borderSkipped: 'bottom'
                    }
                },
                responsive: true,
                maintainAspectRatio: false,
                scaleShowVerticalLines: false,
                responsiveAnimationDuration: 500,
                legend: {
                    position: 'top',
                },
                scales: {
                    xAxis: {
                        display: true,
                        grid: {
                            color: "#f3f3f3",
                            drawTicks: false,
                        },
                        scaleLabel: {
                            display: true,
                        }
                    },
                    yAxis: {
                        display: true,
                        grid: {
                            color: "#f3f3f3",
                            drawTicks: false,
                        },
                        scaleLabel: {
                            display: true,
                        }
                    }
                }
            };

            // Chart Data
            var chartData = {
                labels: ['2006', '2007', '2008', '2009', '2010', '2011', '2012'],
                datasets: [{
                    label: "Series A",
                    data: [65, 59, 80, 81, 56, 55, 40],
                    backgroundColor: "rgba(255, 95, 32, 0.8)",
                    borderColor: "transparent",
                    pointBackgroundColor: 'rgba(148,159,177,1)',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: 'rgba(148,159,177,0.8)'
                }, {
                    label: "Series B",
                    data: [28, 48, 40, 19, 86, 27, 90],
                    backgroundColor: "rgba(102, 110, 232, 0.8)",
                    borderColor: 'transparent',
                    pointBackgroundColor: 'rgba(148,159,177,1)',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: 'rgba(148,159,177,0.8)'
                }]
            };

            var config = {
                type: 'bar',

                // Chart Options
                options: chartOptions,

                data: chartData
            };

            // Create the chart
            var chart = new Chart(ctx, config);
        </script>
    }
}
